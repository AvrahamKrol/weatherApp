(this.webpackJsonpweather=this.webpackJsonpweather||[]).push([[0],{232:function(e,t,i){},233:function(e,t,i){"use strict";i.r(t);var s=i(27),r=i(28),a=i(0),l=i(1),c=i(11),d=i(238),n=i(239),o=i(96),u=i.n(o);const m="https://lab.lectrum.io/rtx/api/forecast";console.log(m);const j=Object.freeze({async getWeather(){const{data:e}=await u.a.get(`${m}`);return null===e||void 0===e?void 0:e.data}}),p=()=>{const{data:e,isFetched:t}=Object(r.useQuery)("weather",j.getWeather);return{forecastList:e,isFetched:t}},h=(e,t)=>{if(e){return(null===e||void 0===e?void 0:e.find((e=>e.id===t)))||e[0]}};var b=i(97);const y=new class{constructor(){this.type="",this.minTemperature="",this.maxTemperature="",this.isFiltered=!1,this.selectedDayId="",this.filteredDays=Object(b.a)((e=>null===e||void 0===e?void 0:e.filter((e=>{const t=!this.type||this.type===e.type,i=!this.minTemperature||this.minTemperature<=String(e.temperature),s=!this.maxTemperature||this.maxTemperature>=String(e.temperature);return t&&i&&s})))),Object(a.w)(this,{},{autoBind:!0})}setType(e){this.type=e}setMinTemperature(e){this.minTemperature=e}setMaxTemperature(e){this.maxTemperature=e}applyFilter(e){e.type&&(this.type=e.type),e.minTemperature&&(this.minTemperature=e.minTemperature),e.maxTemperature&&(this.maxTemperature=e.maxTemperature),this.isFiltered=!0}get isFormBlocked(){return""===this.type&&""===this.minTemperature&&""===this.maxTemperature}setSelectedDayId(e){this.selectedDayId=e}get isSelectedDayId(){return this.selectedDayId}resetFilter(){this.maxTemperature="",this.minTemperature="",this.type="",this.isFiltered=!1}};var O=i(3);const x=Object(l.createContext)(y),v=e=>{let{children:t}=e;return Object(O.jsx)(x.Provider,{value:y,children:t})},F=()=>Object(l.useContext)(x),f=e=>{let t=null;return t="\u043c\u0430\u0440\u0442"===e||"\u0430\u0432\u0433\u0443\u0441\u0442"===e?`${e}\u0430`:`${null===e||void 0===e?void 0:e.slice(0,-1)}\u044f`,t},T=Object(c.a)((e=>{let{formatedDay:t,isFilteredDay:i,isNothing:s}=e;const r=F();let a=null,l=null,c=null,o=null;return r.isFiltered||(a=t&&Object(d.a)(null===t||void 0===t?void 0:t.day,"eeee",{locale:n.a}),l=t&&Object(d.a)(null===t||void 0===t?void 0:t.day,"d",{locale:n.a}),c=t&&Object(d.a)(null===t||void 0===t?void 0:t.day,"LLLL",{locale:n.a}),o=`icon ${null===t||void 0===t?void 0:t.type}`),r.isFiltered&&(a=i&&Object(d.a)(null===i||void 0===i?void 0:i.day,"eeee",{locale:n.a}),l=i&&Object(d.a)(null===i||void 0===i?void 0:i.day,"d",{locale:n.a}),c=i&&Object(d.a)(null===i||void 0===i?void 0:i.day,"LLLL",{locale:n.a}),o=`icon ${null===i||void 0===i?void 0:i.type}`),s?"":Object(O.jsxs)("div",{className:"head",children:[Object(O.jsx)("div",{className:o}),Object(O.jsxs)("div",{className:"current-date",children:[Object(O.jsx)("p",{children:a}),Object(O.jsxs)("span",{children:[l," ",f(c)]})]})]})})),D=Object(c.a)((e=>{let{formatedDay:t,isFilteredDay:i}=e;const s=F().isFiltered?i:t;return s?Object(O.jsxs)("div",{className:"current-weather",children:[Object(O.jsx)("p",{className:"temperature",children:null===s||void 0===s?void 0:s.temperature}),Object(O.jsxs)("p",{className:"meta",children:[Object(O.jsxs)("span",{className:"rainy",children:["%",null===s||void 0===s?void 0:s.rain_probability]}),Object(O.jsxs)("span",{className:"humidity",children:["%",null===s||void 0===s?void 0:s.humidity]})]})]}):""})),g=Object(c.a)((e=>{const{day:t,id:i,type:s,temperature:r,onClick:a,selectedDay:l,defaultDay:c,defaultFilteredDay:o}=e,u=l||o||c;return Object(O.jsxs)("div",{onClick:()=>{a(i)},className:`day ${s} ${u===i?"selected":""}`,children:[Object(O.jsx)("p",{children:Object(d.a)(t,"EEEE",{locale:n.a})}),Object(O.jsx)("span",{children:r})]})})),N=Object(c.a)((e=>{const{forecastList:t}=p(),i=F(),s=i.isFiltered?e.filteredList:t,r=e=>{i.setSelectedDayId(e)};return Object(O.jsxs)("div",{className:"forecast",children:[e.isNothing&&Object(O.jsx)("p",{className:"message",children:"\u041f\u043e \u0437\u0430\u0434\u0430\u043d\u043d\u044b\u043c \u043a\u0440\u0438\u0442\u0435\u0440\u0438\u044f\u043c \u043d\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0445 \u0434\u043d\u0435\u0439"}),null===s||void 0===s?void 0:s.slice(0,7).map((t=>{var a,l,c;return Object(O.jsx)(g,{onClick:r,defaultDay:null===(a=s[0])||void 0===a?void 0:a.id,selectedDay:i.isFiltered?null===(l=e.isFilteredDay)||void 0===l?void 0:l.id:null===(c=e.isSelectedDay)||void 0===c?void 0:c.id,...t},t.id)}))]})}));var w=i(23);i(236);const S=e=>{const t=Object(O.jsx)("input",{className:e.className,disabled:e.disabled,type:e.type,id:e.id,value:e.value,name:e.name,...e.register});return Object(O.jsx)(O.Fragment,{children:t})};S.defaultProps={type:"text",tag:"input"};var k=i(47);k.b().shape({minTemperature:k.a(),maxTemperature:k.a()});const L=Object(c.a)((()=>{const[e,t]=Object(l.useState)(""),[i,s]=Object(l.useState)(""),[r,a]=Object(l.useState)(""),c=F(),{applyFilter:d,resetFilter:n,isFiltered:o,isFormBlocked:u}=c,m=Object(w.d)({mode:"onTouched"}),{register:j,handleSubmit:p}=m;return Object(l.useEffect)((()=>{m.watch((e=>{console.log(e)}))}),[m.watch()]),Object(O.jsxs)("form",{onSubmit:p((e=>{const t={type:r,minTemperature:e.minTemperature,maxTemperature:e.maxTemperature};d(t)})),className:"filter",children:[Object(O.jsx)("span",{onClick:()=>{o||e||(t("selected"),s(""),a("cloudy"))},className:`checkbox ${e}`,children:"\u041e\u0431\u043b\u0430\u0447\u043d\u043e"}),Object(O.jsx)("span",{onClick:()=>{o||i||(s("selected"),t(""),a("sunny"))},className:`checkbox ${i}`,children:"\u0421\u043e\u043b\u043d\u0435\u0447\u043d\u043e"}),Object(O.jsxs)("p",{className:"custom-input",children:[Object(O.jsx)("label",{htmlFor:"min-temperature",children:"\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0430"}),Object(O.jsx)(S,{type:"number",disabled:c.isFiltered,id:"min-temperature",register:j("minTemperature")})]}),Object(O.jsxs)("p",{className:"custom-input",children:[Object(O.jsx)("label",{htmlFor:"max-temperature",children:"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0430"}),Object(O.jsx)(S,{type:"number",disabled:c.isFiltered,id:"max-temperature",register:j("maxTemperature")})]}),!c.isFiltered&&Object(O.jsx)("button",{children:"\u041e\u0442\u0444\u0438\u043b\u044c\u0442\u0440\u043e\u0432\u0430\u0442\u044c"}),c.isFiltered&&Object(O.jsx)("button",{onClick:()=>{n(),t(""),s(""),a(""),m.reset()},children:"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c"})]})})),C=Object(c.a)((()=>{const e=F(),{forecastList:t}=p(),i=t&&h(t,e.isSelectedDayId),s=e.filteredDays(t),r=h(s,e.isSelectedDayId),a=e.isFiltered&&0===s.length;return Object(O.jsxs)("main",{children:[Object(O.jsx)(L,{}),Object(O.jsx)(T,{isNothing:a,formatedDay:i,isFilteredDay:r}),Object(O.jsx)(D,{formatedDay:i,isFilteredDay:r}),Object(O.jsx)(N,{isNothing:a,isSelectedDay:i,filteredList:s,isFilteredDay:r})]})}));i(232);const I=new r.QueryClient({defaultOptions:{queries:{refetchOnWindowFocus:!1}}});Object(a.j)({enforceActions:"always",computedRequiresReaction:!0,observableRequiresReaction:!0}),Object(s.render)(Object(O.jsx)(v,{children:Object(O.jsx)(r.QueryClientProvider,{client:I,children:Object(O.jsx)(C,{})})}),document.getElementById("root"),(()=>{console.log("%c \u041f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u043f\u0443\u0449\u0435\u043d\u043e ","background: #00ff00; color: #000000; padding: 2.5px;")}))}},[[233,1,2]]]);
//# sourceMappingURL=main.eac847f7.chunk.js.map