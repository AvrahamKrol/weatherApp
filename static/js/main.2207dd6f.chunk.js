(this.webpackJsonpweather=this.webpackJsonpweather||[]).push([[0],{232:function(e,t,i){},233:function(e,t,i){"use strict";i.r(t);var s=i(27),a=i(28),r=i(0),c=i(1),l=i(11),d=i(238),n=i(239),o=i(96),u=i.n(o);const m="https://lab.lectrum.io/rtx/api/forecast";console.log(m);const j=Object.freeze({async getWeather(){const{data:e}=await u.a.get(`${m}`);return null===e||void 0===e?void 0:e.data}}),p=()=>{const{data:e,isFetched:t}=Object(a.useQuery)("weather",j.getWeather);return{forecastList:e,isFetched:t}},h=(e,t)=>{if(e){return(null===e||void 0===e?void 0:e.find((e=>e.id===t)))||e[0]}};var b=i(97);const y=new class{constructor(){this.type="",this.minTemperature="",this.maxTemperature="",this.isFiltered=!1,this.selectedDayId="",this.filteredDays=Object(b.a)((e=>null===e||void 0===e?void 0:e.filter((e=>{const t=!this.type||this.type===e.type,i=!this.minTemperature||this.minTemperature<=String(e.temperature),s=!this.maxTemperature||this.maxTemperature>=String(e.temperature);return t&&i&&s})))),Object(r.w)(this,{},{autoBind:!0})}setType(e){this.type=e}setMinTemperature(e){this.minTemperature=e}setMaxTemperature(e){this.maxTemperature=e}applyFilter(e){e.type&&(this.type=e.type),e.minTemperature&&(this.minTemperature=e.minTemperature),e.maxTemperature&&(this.maxTemperature=e.maxTemperature),this.isFiltered=!0}get isFormBlocked(){return""===this.type&&""===this.minTemperature&&""===this.maxTemperature}setSelectedDayId(e){this.selectedDayId=e}get isSelectedDayId(){return this.selectedDayId}resetFilter(){this.maxTemperature="",this.minTemperature="",this.type="",this.isFiltered=!1}};var O=i(3);const x=Object(c.createContext)(y),v=e=>Object(O.jsx)(x.Provider,{value:y,children:e.children}),F=()=>Object(c.useContext)(x),f=e=>{let t=null;return t="\u043c\u0430\u0440\u0442"===e||"\u0430\u0432\u0433\u0443\u0441\u0442"===e?`${e}\u0430`:`${null===e||void 0===e?void 0:e.slice(0,-1)}\u044f`,t},T=Object(l.a)((e=>{let{formatedDay:t,isFilteredDay:i,isNothing:s}=e;const a=F();let r=null,c=null,l=null,o=null;return a.isFiltered||(r=t&&Object(d.a)(null===t||void 0===t?void 0:t.day,"eeee",{locale:n.a}),c=t&&Object(d.a)(null===t||void 0===t?void 0:t.day,"d",{locale:n.a}),l=t&&Object(d.a)(null===t||void 0===t?void 0:t.day,"LLLL",{locale:n.a}),o=`icon ${null===t||void 0===t?void 0:t.type}`),a.isFiltered&&(r=i&&Object(d.a)(null===i||void 0===i?void 0:i.day,"eeee",{locale:n.a}),c=i&&Object(d.a)(null===i||void 0===i?void 0:i.day,"d",{locale:n.a}),l=i&&Object(d.a)(null===i||void 0===i?void 0:i.day,"LLLL",{locale:n.a}),o=`icon ${null===i||void 0===i?void 0:i.type}`),s?"":Object(O.jsxs)("div",{className:"head",children:[Object(O.jsx)("div",{className:o}),Object(O.jsxs)("div",{className:"current-date",children:[Object(O.jsx)("p",{children:r}),Object(O.jsxs)("span",{children:[c," ",f(l)]})]})]})})),D=Object(l.a)((e=>{let{formatedDay:t,isFilteredDay:i}=e;const s=F().isFiltered?i:t;return s?Object(O.jsxs)("div",{className:"current-weather",children:[Object(O.jsx)("p",{className:"temperature",children:null===s||void 0===s?void 0:s.temperature}),Object(O.jsxs)("p",{className:"meta",children:[Object(O.jsxs)("span",{className:"rainy",children:["%",null===s||void 0===s?void 0:s.rain_probability]}),Object(O.jsxs)("span",{className:"humidity",children:["%",null===s||void 0===s?void 0:s.humidity]})]})]}):""})),g=Object(l.a)((e=>{const{day:t,id:i,type:s,temperature:a,onClick:r,selectedDay:c,defaultDay:l,defaultFilteredDay:o}=e,u=c||o||l;return Object(O.jsxs)("div",{onClick:()=>{r(i)},className:`day ${s} ${u===i?"selected":""}`,children:[Object(O.jsx)("p",{children:Object(d.a)(t,"EEEE",{locale:n.a})}),Object(O.jsx)("span",{children:a})]})})),N=Object(l.a)((e=>{const{forecastList:t}=p(),i=F(),s=i.isFiltered?e.filteredList:t,a=e=>{i.setSelectedDayId(e)};return Object(O.jsxs)("div",{className:"forecast",children:[e.isNothing&&Object(O.jsx)("p",{className:"message",children:"\u041f\u043e \u0437\u0430\u0434\u0430\u043d\u043d\u044b\u043c \u043a\u0440\u0438\u0442\u0435\u0440\u0438\u044f\u043c \u043d\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0445 \u0434\u043d\u0435\u0439"}),null===s||void 0===s?void 0:s.slice(0,7).map((t=>{var r,c,l;return Object(O.jsx)(g,{onClick:a,defaultDay:null===(r=s[0])||void 0===r?void 0:r.id,selectedDay:i.isFiltered?null===(c=e.isFilteredDay)||void 0===c?void 0:c.id:null===(l=e.isSelectedDay)||void 0===l?void 0:l.id,...t},t.id)}))]})}));var w=i(23);i(236);const S=e=>{const t=Object(O.jsx)("input",{className:e.className,disabled:e.disabled,type:e.type,id:e.id,value:e.value,name:e.name,...e.register});return Object(O.jsx)(O.Fragment,{children:t})};S.defaultProps={type:"text",tag:"input"};var k=i(47);k.b().shape({minTemperature:k.a(),maxTemperature:k.a()});const L=Object(l.a)((()=>{const[e,t]=Object(c.useState)(""),[i,s]=Object(c.useState)(""),[a,r]=Object(c.useState)(""),l=F(),{applyFilter:d,resetFilter:n,isFiltered:o,isFormBlocked:u}=l,m=Object(w.d)({mode:"onTouched"}),{register:j,handleSubmit:p}=m;return Object(c.useEffect)((()=>{m.watch((e=>{console.log(e)}))}),[m.watch()]),Object(O.jsxs)("form",{onSubmit:p((e=>{const t={type:a,minTemperature:e.minTemperature,maxTemperature:e.maxTemperature};d(t)})),className:"filter",children:[Object(O.jsx)("span",{onClick:()=>{o||e||(t("selected"),s(""),r("cloudy"))},className:`checkbox ${e}`,children:"\u041e\u0431\u043b\u0430\u0447\u043d\u043e"}),Object(O.jsx)("span",{onClick:()=>{o||i||(s("selected"),t(""),r("sunny"))},className:`checkbox ${i}`,children:"\u0421\u043e\u043b\u043d\u0435\u0447\u043d\u043e"}),Object(O.jsxs)("p",{className:"custom-input",children:[Object(O.jsx)("label",{htmlFor:"min-temperature",children:"\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0430"}),Object(O.jsx)(S,{type:"number",disabled:l.isFiltered,id:"min-temperature",register:j("minTemperature")})]}),Object(O.jsxs)("p",{className:"custom-input",children:[Object(O.jsx)("label",{htmlFor:"max-temperature",children:"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0430"}),Object(O.jsx)(S,{type:"number",disabled:l.isFiltered,id:"max-temperature",register:j("maxTemperature")})]}),!l.isFiltered&&Object(O.jsx)("button",{children:"\u041e\u0442\u0444\u0438\u043b\u044c\u0442\u0440\u043e\u0432\u0430\u0442\u044c"}),l.isFiltered&&Object(O.jsx)("button",{onClick:()=>{n(),t(""),s(""),r(""),m.reset()},children:"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c"})]})})),C=Object(l.a)((()=>{const e=F(),{forecastList:t}=p(),i=t&&h(t,e.isSelectedDayId),s=e.filteredDays(t),a=h(s,e.isSelectedDayId),r=e.isFiltered&&0===s.length;return Object(O.jsxs)("main",{children:[Object(O.jsx)(L,{}),Object(O.jsx)(T,{isNothing:r,formatedDay:i,isFilteredDay:a}),Object(O.jsx)(D,{formatedDay:i,isFilteredDay:a}),Object(O.jsx)(N,{isNothing:r,isSelectedDay:i,filteredList:s,isFilteredDay:a})]})}));i(232);const I=new a.QueryClient({defaultOptions:{queries:{refetchOnWindowFocus:!1}}});Object(r.j)({enforceActions:"always",computedRequiresReaction:!0,observableRequiresReaction:!0}),Object(s.render)(Object(O.jsx)(v,{children:Object(O.jsx)(a.QueryClientProvider,{client:I,children:Object(O.jsx)(C,{})})}),document.getElementById("root"),(()=>{console.log("%c \u041f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u043f\u0443\u0449\u0435\u043d\u043e ","background: #00ff00; color: #000000; padding: 2.5px;")}))}},[[233,1,2]]]);
//# sourceMappingURL=main.2207dd6f.chunk.js.map